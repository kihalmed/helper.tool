<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Domain Extractor</title>
    <style>
        :root {
            --bg: #0f1724;
            --card: #0b1220;
            --muted: #9aa6bf;
            --accent: #7c5cff;
            --accent-dark: #5b3ffd;
            --glass: rgba(255,255,255,0.04);
            --success: #16a34a;
            --danger: #ef4444;
            --highlight: #facc15;
            --text: #e6eef8;
            --border: rgba(255,255,255,0.03);
            --shadow: rgba(2,6,23,0.6);
        }

        :root.light-mode {
            --bg: #f5f7fa;
            --card: #ffffff;
            --muted: #6b7280;
            --accent: #7c5cff;
            --accent-dark: #6846ff;
            --glass: rgba(0,0,0,0.04);
            --success: #16a34a;
            --danger: #ef4444;
            --highlight: #d97706;
            --text: #1f2937;
            --border: rgba(0,0,0,0.08);
            --shadow: rgba(0,0,0,0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
        }

        body {
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background: var(--bg);
            color: var(--text);
            -webkit-font-smoothing: antialiased;
            padding: 36px;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            transition: background 0.3s ease, color 0.3s ease;
        }

        .wrap {
            max-width: 1000px;
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .card {
            background: var(--card);
            border-radius: 14px;
            padding: 24px;
            box-shadow: 0 8px 30px var(--shadow);
            border: 1px solid var(--border);
            transition: background 0.3s ease, border 0.3s ease, box-shadow 0.3s ease;
        }

        h1 {
            font-size: 24px;
            margin: 0 0 8px;
            color: var(--text);
            font-weight: 700;
        }

        .lead {
            color: var(--muted);
            margin: 0 0 20px;
            font-size: 14px;
            line-height: 1.6;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .stat-item {
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 16px;
            text-align: center;
            transition: background 0.3s ease;
        }

        .stat-label {
            font-size: 12px;
            color: var(--muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--accent);
        }

        label {
            display: block;
            margin: 0 0 10px;
            font-size: 14px;
            font-weight: 600;
            color: var(--highlight);
        }

        textarea {
            width: 100%;
            min-height: 180px;
            resize: vertical;
            border-radius: 10px;
            padding: 14px;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
            font-size: 13px;
            line-height: 1.6;
            color: var(--text);
            background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.03));
            border: 1px solid var(--border);
            transition: background 0.3s ease, color 0.3s ease, border 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: var(--accent);
        }

        textarea[readonly] {
            opacity: 0.85;
            cursor: default;
        }

        textarea::placeholder {
            color: var(--muted);
            opacity: 0.5;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-top: 16px;
            flex-wrap: wrap;
        }

        button.btn {
            background: linear-gradient(180deg, var(--accent), var(--accent-dark));
            border: 0;
            color: white;
            padding: 10px 18px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: opacity 0.2s ease, transform 0.1s ease;
        }

        button.btn:hover {
            opacity: 0.9;
        }

        button.btn:active {
            transform: scale(0.97);
        }

        button.btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        button.btn.success {
            background: linear-gradient(180deg, var(--success), #15803d);
        }

        button.btn.danger {
            background: linear-gradient(180deg, var(--danger), #dc2626);
        }

        button.btn.ghost {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--muted);
        }

        .format-options {
            display: flex;
            gap: 16px;
            padding: 16px;
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .format-title {
            font-weight: 600;
            color: var(--accent);
            margin-right: 10px;
            font-size: 14px;
        }

        .format-options label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 14px;
            color: var(--text);
            font-weight: 500;
            margin: 0;
        }

        .format-options input[type="radio"] {
            cursor: pointer;
            width: 18px;
            height: 18px;
            accent-color: var(--accent);
        }

        .info-box {
            background: var(--glass);
            padding: 16px;
            border-radius: 10px;
            border-left: 4px solid var(--accent);
            margin-top: 20px;
            font-size: 13px;
            color: var(--muted);
            line-height: 1.7;
        }

        .info-box strong {
            color: var(--text);
        }

        .info-box code {
            background: rgba(124, 92, 255, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: ui-monospace, monospace;
            font-size: 12px;
            color: var(--accent);
        }

        .toast {
            position: fixed;
            top: 24px;
            right: 24px;
            background: var(--success);
            color: white;
            padding: 14px 20px;
            border-radius: 10px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 1000;
            font-weight: 600;
            font-size: 14px;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        .theme-toggle {
            position: fixed;
            top: 24px;
            right: 24px;
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 10px 14px;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.2s ease;
            z-index: 100;
        }

        .theme-toggle:hover {
            background: var(--accent);
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            body {
                padding: 20px;
            }

            .stats {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .controls {
                flex-direction: column;
            }

            button.btn {
                width: 100%;
            }

            h1 {
                font-size: 20px;
            }

            .theme-toggle {
                top: 16px;
                right: 16px;
            }
        }
    </style>
</head>
<body>

    <div class="wrap">
        <div class="card">
            <h1>üåê Domain Extractor</h1>
            <p class="lead">Extract clean domain names from URLs, emails, and mixed text content. Supports multiple formats and intelligent parsing.</p>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-label">Domains Found</div>
                    <div class="stat-value" id="domainCount">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Processing Time</div>
                    <div class="stat-value" id="processTime">0ms</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Input Size</div>
                    <div class="stat-value" id="inputSize">0</div>
                </div>
            </div>

            <label for="inputText">üì• Input Text</label>
            <textarea id="inputText" placeholder="Paste URLs, emails, HTML, or mixed text here...

Examples:
https://www.example.com/path?query=value
user@domain.com
<a href='https://test.org'>Link</a>
Visit example.net for more info"></textarea>

            <div class="controls">
                <button class="btn" onclick="extractDomains()">‚ö° Extract Domains</button>
                <button class="btn danger" onclick="clearFields()">üóëÔ∏è Clear</button>
                <button class="btn success" id="copyBtn" onclick="copyToClipboard()" disabled>üìã Copy Results</button>
            </div>
        </div>

        <div class="card">
            <div class="format-options">
                <span class="format-title">üìã Output Format:</span>
                <label>
                    <input type="radio" name="format" value="domains" checked onchange="reExtractIfNeeded()">
                    Domains Only
                </label>
                <label>
                    <input type="radio" name="format" value="both" onchange="reExtractIfNeeded()">
                    Email + Domain (Both)
                </label>
            </div>

            <label for="outputText">üì§ Extracted Domains</label>
            <textarea id="outputText" readonly placeholder="Extracted domains will appear here (one per line)..."></textarea>
        </div>
    </div>

    <div class="toast" id="toast">Copied to clipboard!</div>

    <script>
        // Domain Extraction Logic
        class DomainExtractor {
            constructor() {
                this.patterns = {
                    url: /(?:https?|ftp|ftps):\/\/([a-zA-Z0-9](?:[a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?)*)/gi,
                    email: /\b([a-zA-Z0-9._%+\-\[\]]+@([a-zA-Z0-9](?:[a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?)*))\b/gi,
                    standalone: /(?:^|[\s>'"(])((?:[a-zA-Z0-9](?:[a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+(?:com|org|net|edu|gov|mil|int|info|biz|name|museum|coop|aero|xxx|idv|pro|asia|cat|jobs|mobi|tel|travel|ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw))(?:$|[\s<'"/)])/gi
                };
                
                this.invalidPatterns = [
                    /^localhost$/i,
                    /^127\.0\.0\.1$/,
                    /^0\.0\.0\.0$/,
                    /^\d+\.\d+\.\d+\.\d+$/,
                    /^::1$/,
                    /\.(jpg|jpeg|png|gif|pdf|doc|docx|zip|rar|exe|dmg)$/i
                ];
            }

            extract(text, format = 'domains') {
                const startTime = performance.now();
                const domains = new Set();
                const emailDomainPairs = [];
                const seenEmails = new Set();

                // Extract from URLs
                let matches = text.matchAll(this.patterns.url);
                for (const match of matches) {
                    const domain = this.cleanDomain(match[1]);
                    if (domain && this.isValidDomain(domain)) {
                        domains.add(domain);
                    }
                }

                // Extract from emails
                matches = text.matchAll(this.patterns.email);
                for (const match of matches) {
                    const fullEmail = match[1];
                    const domain = this.cleanDomain(match[2]);
                    
                    if (domain && this.isValidDomain(domain)) {
                        domains.add(domain);
                        
                        if (!seenEmails.has(fullEmail)) {
                            seenEmails.add(fullEmail);
                            emailDomainPairs.push({
                                email: fullEmail,
                                domain: domain
                            });
                        }
                    }
                }

                // Extract standalone domains from quoted strings
                const quotedDomainPattern = /['"]([a-zA-Z0-9](?:[a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?)+)['"]/g;
                matches = text.matchAll(quotedDomainPattern);
                for (const match of matches) {
                    const domain = this.cleanDomain(match[1]);
                    if (domain && this.isValidDomain(domain)) {
                        domains.add(domain);
                    }
                }

                // Extract standalone domains
                matches = text.matchAll(this.patterns.standalone);
                for (const match of matches) {
                    const domain = this.cleanDomain(match[1]);
                    if (domain && this.isValidDomain(domain)) {
                        domains.add(domain);
                    }
                }

                const endTime = performance.now();
                const processTime = Math.round(endTime - startTime);

                return {
                    domains: Array.from(domains).sort(),
                    emailDomainPairs: emailDomainPairs,
                    count: domains.size,
                    processTime: processTime,
                    format: format
                };
            }

            cleanDomain(domain) {
                if (!domain) return null;
                domain = domain.replace(/^(?:https?|ftp|ftps):\/\//i, '');
                domain = domain.split('/')[0];
                domain = domain.split('?')[0];
                domain = domain.split('#')[0];
                domain = domain.split(':')[0];
                domain = domain.replace(/\.+$/, '');
                domain = domain.toLowerCase().trim();
                return domain;
            }

            isValidDomain(domain) {
                if (!domain || domain.length < 3) return false;
                
                for (const pattern of this.invalidPatterns) {
                    if (pattern.test(domain)) return false;
                }
                
                if (!domain.includes('.')) return false;
                if (/^[.-]|[.-]$/.test(domain)) return false;
                
                const parts = domain.split('.');
                const tld = parts[parts.length - 1];
                if (tld.length < 2) return false;
                
                if (/[^a-z0-9.-]/.test(domain)) return false;
                
                return true;
            }
        }

        // Global extractor instance
        const extractor = new DomainExtractor();

        function getSelectedFormat() {
            const selected = document.querySelector('input[name="format"]:checked');
            return selected ? selected.value : 'domains';
        }

        function extractDomains() {
            const input = document.getElementById('inputText').value;
            
            if (!input.trim()) {
                showToast('Please enter some text first', '#ef4444');
                return;
            }

            const format = getSelectedFormat();
            const result = extractor.extract(input, format);
            
            if (format === 'both') {
                const lines = [];
                const domainsFromEmails = new Set();
                
                result.emailDomainPairs.forEach(pair => {
                    lines.push(pair.email);
                    lines.push(pair.domain);
                    domainsFromEmails.add(pair.domain);
                });
                
                result.domains.forEach(domain => {
                    if (!domainsFromEmails.has(domain)) {
                        lines.push(domain);
                    }
                });
                
                document.getElementById('outputText').value = lines.join('\n');
            } else {
                document.getElementById('outputText').value = result.domains.join('\n');
            }
            
            document.getElementById('domainCount').textContent = result.count;
            document.getElementById('processTime').textContent = result.processTime + 'ms';
            
            document.getElementById('copyBtn').disabled = result.count === 0;
            
            if (result.count === 0) {
                showToast('No domains found', '#f97316');
            }
        }

        function reExtractIfNeeded() {
            if (document.getElementById('outputText').value) {
                extractDomains();
            }
        }

        function clearFields() {
            document.getElementById('inputText').value = '';
            document.getElementById('outputText').value = '';
            document.getElementById('domainCount').textContent = '0';
            document.getElementById('processTime').textContent = '0ms';
            document.getElementById('inputSize').textContent = '0';
            document.getElementById('copyBtn').disabled = true;
        }

        function updateInputSize() {
            const size = document.getElementById('inputText').value.length;
            if (size > 1000) {
                document.getElementById('inputSize').textContent = (size / 1000).toFixed(1) + 'k';
            } else {
                document.getElementById('inputSize').textContent = size;
            }
        }

        async function copyToClipboard() {
            const output = document.getElementById('outputText');
            try {
                await navigator.clipboard.writeText(output.value);
                showToast('Copied to clipboard!', '#16a34a');
            } catch (err) {
                output.select();
                document.execCommand('copy');
                showToast('Copied to clipboard!', '#16a34a');
            }
        }

        function showToast(message, color = '#16a34a') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.background = color;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function toggleTheme() {
            const root = document.documentElement;
            const isLight = root.classList.contains('light-mode');
            const newTheme = isLight ? 'dark' : 'light';
            
            applyTheme(newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Notify parent window if in iframe
            try {
                if (window.parent && window.parent !== window) {
                    window.parent.postMessage({ theme: newTheme }, '*');
                }
            } catch (e) {}
        }

        function applyTheme(theme) {
            const root = document.documentElement;
            const toggleBtn = document.getElementById('themeToggle');
            
            if (theme === 'light') {
                root.classList.add('light-mode');
                if (toggleBtn) toggleBtn.textContent = '‚òÄÔ∏è';
            } else {
                root.classList.remove('light-mode');
                if (toggleBtn) toggleBtn.textContent = 'üåô';
            }
        }

        function checkParentTheme() {
            try {
                if (window.parent && window.parent !== window) {
                    const isLight = window.parent.document.body.classList.contains('light-mode');
                    applyTheme(isLight ? 'light' : 'dark');
                    return true;
                }
            } catch {
                const saved = localStorage.getItem('theme') || 'dark';
                applyTheme(saved);
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            checkParentTheme();
            
            document.getElementById('inputText').addEventListener('input', updateInputSize);
            document.getElementById('inputText').addEventListener('keydown', (e) => {
                if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                    extractDomains();
                }
            });
        });

        // Theme sync with parent window
        window.addEventListener('message', (event) => {
            if (event.data?.theme) {
                applyTheme(event.data.theme);
                localStorage.setItem('theme', event.data.theme);
            }
        });

        setInterval(checkParentTheme, 200);
        window.addEventListener('focus', checkParentTheme);
        document.addEventListener('visibilitychange', () => { 
            if (!document.hidden) checkParentTheme(); 
        });
        window.addEventListener('mouseenter', checkParentTheme);
        window.addEventListener('click', checkParentTheme);
    </script>
</body>
</html>
