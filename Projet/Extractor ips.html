<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IP Extractor</title>
  <style>
    :root {
      --bg: #0f1724;
      --card: #0b1220;
      --muted: #9aa6bf;
      --accent: #7c5cff;
      --accent-dark: #5b3ffd;
      --glass: rgba(255,255,255,0.04);
      --success: #16a34a;
      --danger: #ef4444;
      --text: #e6eef8;
      --border: rgba(255,255,255,0.05);
      --shadow: rgba(2,6,23,0.6);
    }

    :root.light-mode {
      --bg: #f5f7fa;
      --card: #ffffff;
      --muted: #6b7280;
      --accent: #7c5cff;
      --accent-dark: #6846ff;
      --glass: rgba(0,0,0,0.04);
      --success: #16a34a;
      --danger: #ef4444;
      --text: #1f2937;
      --border: rgba(0,0,0,0.08);
      --shadow: rgba(0,0,0,0.1);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg);
      color: var(--text);
      -webkit-font-smoothing:antialiased;
      padding:36px;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .wrap{max-width:720px;width:100%;}
    .card{
      background: var(--card);
      border-radius:14px;
      padding:20px;
      box-shadow:0 8px 30px var(--shadow);
      border:1px solid var(--border);
      transition:background 0.3s ease, box-shadow 0.3s ease, border 0.3s ease;
    }

    h1{font-size:20px;margin:0 0 12px}
    p.lead{color:var(--muted);margin:6px 0 16px;font-size:14px}

    label{display:block;margin:12px 0 6px;font-size:14px;font-weight:600;color:var(--accent)}
    textarea{
      width:100%;
      min-height:120px;
      resize:vertical;
      border-radius:10px;
      padding:14px;
      font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
      font-size:13px;
      color:var(--text);
      background:var(--glass);
      border:1px solid var(--border);
      transition: background 0.3s ease, color 0.3s ease, border 0.3s ease;
    }
    textarea[readonly]{opacity:.85}

    .controls{display:flex;gap:10px;margin-top:14px;flex-wrap:wrap}
    button.btn{
      background:linear-gradient(180deg,var(--accent),var(--accent-dark));
      border:0;color:white;padding:8px 14px;
      border-radius:10px;cursor:pointer;font-weight:600;
      transition:opacity 0.2s ease;
    }
    button.btn.warn{background:linear-gradient(180deg,#f97316,#ef4444)}
    button.btn.ghost{background:transparent;border:1px solid var(--border);color:var(--muted)}
    button.btn:hover{opacity:.9}

    .footer{margin-top:12px;font-size:13px;color:var(--muted);text-align:center}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>IP Extractor</h1>
      <p class="lead">Paste raw text â€” this tool will automatically extract all valid IPv4 addresses.</p>

      <label for="inputText">Input Text</label>
      <textarea id="inputText" placeholder="Paste your text here..."></textarea>

      <div class="controls">
        <button class="btn" id="extractButton">Extract IPs</button>
        <button class="btn ghost" id="clear">Clear</button>
      </div>

      <label for="output">Extracted IPs</label>
      <textarea id="output" placeholder="Extracted IPs will appear here..." readonly></textarea>

      <div class="controls">
        <button class="btn warn" id="copyButton">Copy Extracted IPs</button>
      </div>

      <div class="footer">All processing is client-side. No data is sent anywhere.</div>
    </div>
  </div>

  <script>
    // ðŸŒ™ Sync dark/light mode from parent or localStorage (no functionality changes)
    document.addEventListener("DOMContentLoaded", function () {
      function applyTheme(theme) {
        if (theme === 'light') {
          document.documentElement.classList.add('light-mode');
        } else {
          document.documentElement.classList.remove('light-mode');
        }
      }

      function checkParentTheme() {
        try {
          if (window.parent && window.parent !== window) {
            const parentHasLightMode = window.parent.document.body.classList.contains('light-mode');
            applyTheme(parentHasLightMode ? 'light' : 'dark');
            return true;
          }
        } catch (e) {
          const savedTheme = localStorage.getItem('theme') || 'dark';
          applyTheme(savedTheme);
          return false;
        }
      }

      checkParentTheme();

      window.addEventListener('message', (event) => {
        if (event.data && event.data.theme) {
          applyTheme(event.data.theme);
          localStorage.setItem('theme', event.data.theme);
        }
      });

      setInterval(() => { checkParentTheme(); }, 200);
      window.addEventListener('focus', () => checkParentTheme());
      document.addEventListener('visibilitychange', () => { if (!document.hidden) checkParentTheme(); });
      window.addEventListener('mouseenter', () => checkParentTheme());
      window.addEventListener('click', () => checkParentTheme());
    });

    // âœ… Original functionality (unchanged)
    const inputText = document.getElementById("inputText");
    const output = document.getElementById("output");

    document.getElementById("extractButton").addEventListener("click", extractIPs);
    document.getElementById("copyButton").addEventListener("click", copyIPs);
    document.getElementById("clear").addEventListener("click", () => {
      inputText.value = "";
      output.value = "";
    });

    function extractIPs() {
      const text = inputText.value;
      const regex = /\b(?:\d{1,3}\.){3}\d{1,3}\b/g;
      const matches = text.match(regex) || [];
      const valid = matches.filter(ip => isValidIp(ip));
      output.value = valid.join("\n");
    }

    function isValidIp(ip) {
      const parts = ip.split(".");
      return parts.length === 4 && parts.every(x => Number(x) >= 0 && Number(x) <= 255);
    }

    function copyIPs() {
      output.select();
      document.execCommand("copy");
    }
  </script>
</body>
</html>
